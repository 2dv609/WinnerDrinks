(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(22),s=n.n(c),o=(n(30),n(24)),i=n(2),u=n(0);var l=function(e){var t=Object(r.useState)(""),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(u.jsxs)("div",{className:"Login box",children:[Object(u.jsx)("h1",{className:"title",children:"Add all players"}),Object(u.jsx)("input",{className:"input",type:"text",value:a,name:"newname",id:"newname",onChange:function(e){e.target.value.length>10||c(e.target.value)}}),Object(u.jsx)("input",{className:"button",type:"button",onClick:function(){e.setter(a),c("")},value:"Add",id:"newnamebtn"})]})};var h=function(e){var t=e.gp,n=Object(r.useState)(t.getPlayers(2)),a=Object(i.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){return function(){s(t.getPlayers(2))}}),[t]),Object(u.jsxs)("div",{className:"box",children:[Object(u.jsx)("div",{className:"content",children:e.gameEvent.question.replace("{players[0]}","".concat(c[0])).replace("{players[1]}","".concat(c[1]))}),Object(u.jsx)("h3",{children:"Who won?"}),Object(u.jsx)("button",{className:"button",onClick:function(){t.addScore(c[0],1),t.makeWinnerAlert(c[0]),t.chooseRandomNewGame()},children:c[0].toString()}),Object(u.jsx)("button",{className:"button",onClick:function(){t.addScore(c[1],1),t.makeWinnerAlert(c[1]),t.chooseRandomNewGame()},children:c[1].toString()})]})},d=n(6),b=n(7),j=function(){function e(t){if(Object(d.a)(this,e),this.name=void 0,this.isActive=void 0,this.score=void 0,t.length<3||t.length>10)throw Error("Name must be at least 3 characters and not exceed 10.");if(t&&!t.trim())throw Error("Name cannot be empty.");this.name=t,this.isActive=!0,this.score=0}return Object(b.a)(e,[{key:"setScore",value:function(e){this.score=e}},{key:"addScore",value:function(e){this.score+=e}},{key:"toString",value:function(e){return e?"Name: ".concat(this.name," Score: ").concat(this.score," isActive: ").concat(this.isActive):this.name}}]),e}(),v=(n(32),["#9ede73","#f7ea00","#e48900","#be0000"]),f={animationName:"spin",animationTimingFunction:"ease-in-out",animationDuration:"".concat(3,"s"),animationDelay:"0.0s",animationIterationCount:1,animationDirection:"normal",animationFillMode:"forwards",marginBottom:"2rem"};var p=function(e){var t=e.gp,n=t.getPlayers(4),a=360/n.length,c=Object(r.useState)(!0),s=Object(i.a)(c,2),o=s[0],l=s[1],h=Object(r.useState)(""),d=Object(i.a)(h,2),b=d[0],j=d[1],p=Object(r.useState)(""),m=Object(i.a)(p,2),g=m[0],O=m[1],w=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},x=function(){if(o){O("");var e=w(1,n.length)-1,t=function(e){var t=0;switch(e){case 0:t=w(226,315);break;case 1:t=w(136,225);break;case 2:t=w(46,135);break;case 3:t=w(0,45)}return 1440+t}(e),r=document.styleSheets[0],a="\n      @keyframes spin {\n        from {transform:rotate(0deg);}\n        to {transform:rotate(".concat(t,"deg);}\n      }");r.insertRule(a,r.cssRules.length),setTimeout((function(){return y(e)}),3500)}else O("Please reset the wheel..."),console.log("Please reset the wheel...");l(!1)},y=function(e){var r=n[e];console.log("Winning value is: ".concat(r.toString())),j("".concat(r.toString()," won!")),k(),t.addScore(r,1),t.makeWinnerAlert(r),t.chooseRandomNewGame()},k=function(){try{document.styleSheets[0].deleteRule(2),l(!0),O(""),j("")}catch(e){console.log("Stylesheet has already been reset..."),O("Stylesheet has already been reset...")}};return Object(u.jsxs)("div",{className:"WheelComponent",children:[Object(u.jsx)("span",{style:{margin:"0px"},children:"|"}),Object(u.jsx)("div",{onClick:x,className:"wheel",style:f,children:n.map((function(e,t){var n=t*a;return Object(u.jsx)("div",{style:{transform:"rotate(".concat(n,"deg)"),borderRight:"200px solid ".concat(v[t])},className:"arrow",children:Object(u.jsx)("span",{children:e.toString()})},t)}))}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsx)("button",{onClick:x,children:"Spin!"})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:g}),Object(u.jsx)("p",{children:b})]})]})};n(12);var m=function(e){var t=e.gp,n=Object(r.useState)(t.getPlayers(2)),a=Object(i.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){return function(){s(t.getPlayers(2))}}),[t]),Object(u.jsxs)("div",{className:"box container",children:[Object(u.jsx)("div",{className:"content",children:e.gameEvent.question}),Object(u.jsx)("h3",{className:"title is-6",children:"Were both correct?"}),Object(u.jsx)("button",{className:"button",onClick:function(){t.addScore(c[0],1),t.addScore(c[1],1),t.makeWinnerAlert(c),t.chooseRandomNewGame()},children:"They were correct!"}),Object(u.jsx)("button",{className:"button",onClick:function(){t.makeWinnerAlert(null),t.chooseRandomNewGame()},children:"They were wrong!"})]})},g=n(3),O=n.n(g),w=n(5),x=n(23),y=function(e){var t=document.createElement("span");return t.innerHTML=e,t.innerHTML},k=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e},N=(n(37),n(38),function(e){var t=e.answer,n=e.handleAnswer;return Object(r.useEffect)((function(){}),[]),Object(u.jsx)("div",{className:"questionDiv card",onClick:n,children:t})}),S=function(e){var t=e.gp,n=Object(r.useState)(t.getPlayers(1)),a=Object(i.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)([]),l=Object(i.a)(o,2),h=l[0],d=l[1],b=Object(r.useState)(0),j=Object(i.a)(b,2),v=j[0],f=j[1];Object(r.useEffect)((function(){console.log(e.event),p()}),[]),Object(r.useEffect)((function(){return function(){s(t.getPlayers(1))}}),[t]);var p=function(){var t=Object(w.a)(O.a.mark((function t(){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.gameEvent,(r=n.incorrect_answers).push(n.correct_answer),r=k(r),n.all_answers=r,d([n]);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(e){e.target.innerText===h[v].correct_answer?(t.addScore(c[0],1),t.chooseRandomNewGame(),t.makeWinnerAlert(c[0])):(f(v+1),t.chooseRandomNewGame(),t.makeWinnerAlert(null))};return Object(u.jsxs)("div",{className:"box",children:[Object(u.jsxs)("div",{id:"gameInfo",children:[Object(u.jsx)("h4",{children:"Turn to answer a question: "}),Object(u.jsx)("ul",{children:Object(u.jsx)("li",{className:"card",children:c[0].name})})]}),Object(u.jsx)("br",{}),h.length>0&&Object(u.jsx)("h2",{children:y(h[v].question)}),h.length>0?Object(u.jsxs)("div",{className:"answersDiv",children:[Object(u.jsx)("br",{}),h[v].all_answers.map((function(e){return Object(u.jsx)(N,{answer:y(e),handleAnswer:m},Object(x.uuid)())}))]}):Object(u.jsx)("h4",{children:"Loading questions"})]})},E=n(10),T=n.n(E),A=function(){function e(t){Object(d.a)(this,e),this.baseUrl=void 0,this.baseUrl=t}return Object(b.a)(e,[{key:"getTrivia",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get(this.baseUrl+"trivia");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getBackToBack",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get(this.baseUrl+"back-to-back");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getParty",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get(this.baseUrl+"party");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),B=n(25),P=function(){function e(t,n,r,a){Object(d.a)(this,e),this.db=void 0,this.dbName=void 0,this.triviaEvents=void 0,this.partyEvents=void 0,this.backToBackEvents=void 0,this.dbName=t,this.triviaEvents=n,this.partyEvents=r,this.backToBackEvents=a}return Object(b.a)(e,[{key:"openDB",value:function(){var e=Object(w.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(B.a)(this.dbName,1);case 3:return this.db=e.sent,e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.log("error:",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTrivia",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDB();case 2:return t=this.db.transaction(this.triviaEvents,"readonly"),n=t.objectStore(this.triviaEvents),e.next=6,n.getAll();case 6:return r=e.sent,e.abrupt("return",{questions:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBackToBack",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDB();case 2:return t=this.db.transaction(this.backToBackEvents,"readonly"),n=t.objectStore(this.backToBackEvents),e.next=6,n.getAll();case 6:return r=e.sent,e.abrupt("return",{questions:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getParty",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDB();case 2:return t=this.db.transaction(this.partyEvents,"readonly"),n=t.objectStore(this.partyEvents),e.next=6,n.getAll();case 6:return r=e.sent,e.abrupt("return",{questions:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();var W=function(e){var t=[p,h,m,S],n=Object(r.useState)(1),a=Object(i.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(void 0),l=Object(i.a)(o,2),d=l[0],b=l[1],v=Object(r.useState)(void 0),f=Object(i.a)(v,2),g=f[0],O=f[1],w=Object(r.useState)(void 0),x=Object(i.a)(w,2),y=x[0],k=x[1];Object(r.useEffect)((function(){var e,t,n,r=new P("WinnerDrinks","triviaEvents","partyEvents","backToBackEvents"),a=new A("".concat("http://localhost:4000","/api/"));window.indexedDB?(e=r.getTrivia(),t=r.getBackToBack(),n=r.getParty()):(e=a.getTrivia(),t=a.getBackToBack(),n=a.getParty()),Promise.all([e,t,n]).then((function(e){b(e[0]),O(e[1]),k(e[2]),console.log("response[0]",e[0]),console.log("response[1]",e[1]),console.log("response[2]",e[2])}))}),[]);var N=function(e){return e.questions[Math.floor(Math.random()*e.questions.length)]},E={getPlayers:function(t){var n=[];t=Math.min(t,e.players.length),function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t}(e.players);for(var r=0;r<t;r++)n.push(e.players[r]);return n},addScore:function(e,t){e.addScore(t)},makeWinnerAlert:function(e){var t;Array.isArray(e)?(t="The winners are: \n",e.forEach((function(e){t+="".concat(e.toString()," with a total score of: ").concat(e.score," \n")}))):t=null==e?"No points awarded!":e instanceof j?"The winner is ".concat(e.toString()," with a total score of: ").concat(e.score):"",alert(t)},chooseRandomNewGame:function(){for(var e=c;e===c;)e=Math.floor(Math.random()*t.length);s(e)}};if(!d||!g||!y)return Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Loading..."})});switch(c){case 3:return Object(u.jsx)("div",{className:"Game",children:Object(u.jsx)(S,{gp:E,gameEvent:N(d)})});case 2:return Object(u.jsx)("div",{className:"Game",children:Object(u.jsx)(m,{gp:E,gameEvent:N(g)})});case 1:return Object(u.jsx)("div",{className:"Game",children:Object(u.jsx)(h,{gp:E,gameEvent:N(y)})});case 0:return Object(u.jsx)("div",{className:"Game",children:Object(u.jsx)(p,{gp:E})})}return Object(u.jsx)("div",{className:"Game"})};n(56);var C=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"button is-danger",onClick:function(){window.location.reload()},children:"Reload page"})})};var M=function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),h=Object(i.a)(s,2),d=h[0],b=h[1];return d?Object(u.jsxs)("div",{className:"App section",children:[Object(u.jsx)("h1",{className:"title is-3",children:"Let's play!"}),Object(u.jsx)(W,{players:a}),Object(u.jsx)(C,{})]}):Object(u.jsxs)("div",{className:"App section",children:[console.log("PUBLIC_URL"),console.log("http://localhost:4000"),Object(u.jsx)(l,{setter:function(e){var t=new j(e);c([].concat(Object(o.a)(a),[t]))}}),Object(u.jsx)("input",{className:"button",type:"button",value:"Done",onClick:function(){a.length<2||b(!0)}}),Object(u.jsx)("h2",{className:"title is-5",children:"Players"}),Object(u.jsx)("ul",{className:"columns",children:a.map((function(e){return Object(u.jsx)("li",{className:"column",children:e.toString()},e.toString())}))})]})},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(M,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("http://localhost:4000",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("http://localhost:4000","/service-worker.js");R?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):D(t,e)}))}}(),G()}},[[57,1,2]]]);
//# sourceMappingURL=main.9dccc2d0.chunk.js.map